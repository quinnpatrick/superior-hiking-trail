<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day 4 â€“ Superior Hiking Trail</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
  </head>
  <body>
    <div id="site-header"></div>
    <script>
      fetch("header.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("site-header").innerHTML = data;
        });
    </script>

    <main>
      <h1>Day 4 - September 22, 2020</h1>

      <div class="day-layout">
        <section class="day-info">
          <ul>
            <li><strong>Distance:</strong> 22.7 miles</li>
            <li><strong>Elapsed Time:</strong> 11:09:45</li>
            <li><strong>Elevation Min/Max:</strong> 694 / 1,697 ft</li>
            <li><strong>Ascent/Descent:</strong> 6,235 / 6,530 ft</li>
            <li><strong>Start/Stop:</strong> 6:20:38 AM â€“ 5:30:23 PM</li>
            <li>
              <strong>Sunrise:</strong> 6:48 AM | <strong>Sunset:</strong> 6:57
              PM
            </li>
            <li>
              <strong>Trail Miles:</strong> 22.7 |
              <strong>Non-Trail Miles:</strong> 0.0
            </li>
            <li>
              <strong>Start:</strong> South Bally Creek Pond Campsite |
              <strong>End:</strong> West Poplar River Campsite
            </li>
            <li>
              <strong>Weather:</strong>
              <ul>
                <li>High: 81Â°F / Low: 51Â°F</li>
              </ul>
            </li>
            <li>
              <strong>Highlights:</strong>
              <ul>
                <li>.</li>
              </ul>
            </li>
          </ul>
        </section>

        <section class="day-map">
          <div id="trail-map" style="height: 400px; width: 100%"></div>
        </section>
      </div>
      <section class="gallery">
        <figure>
          <a href="images/IMG_20200922_075929.jpg" target="_blank">
            <img src="images/IMG_20200922_075929.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 07:59:29<br />
            <a
              href="https://maps.google.com/?q=47.758737131953239,-90.497159007936716"
              target="_blank"
              >ğŸ“ 47.75873, -90.49715</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_091759.jpg" target="_blank">
            <img src="images/IMG_20200922_091759.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 09:17:59<br />
            <a
              href="https://maps.google.com/?q=47.746524028480053,-90.52502665668726"
              target="_blank"
              >ğŸ“ 47.74652, -90.52502</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_092027.jpg" target="_blank">
            <img src="images/IMG_20200922_092027.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 09:20:27<br />
            <a
              href="https://maps.google.com/?q=47.746191937476397,-90.52533452399075"
              target="_blank"
              >ğŸ“ 47.74619, -90.52533</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_095628.jpg" target="_blank">
            <img src="images/IMG_20200922_095628.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 09:56:28<br />
            <a
              href="https://maps.google.com/?q=47.730612913146615,-90.5382592510432"
              target="_blank"
              >ğŸ“ 47.73061, -90.53825</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_102757.jpg" target="_blank">
            <img src="images/IMG_20200922_102757.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 10:27:57<br />
            <a
              href="https://maps.google.com/?q=47.721366249024868,-90.532735073938966"
              target="_blank"
              >ğŸ“ 47.72136, -90.53273</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_103046.jpg" target="_blank">
            <img src="images/IMG_20200922_103046.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 10:30:46<br />
            <a
              href="https://maps.google.com/?q=47.720489334315062,-90.533719277009368"
              target="_blank"
              >ğŸ“ 47.72048, -90.53371</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_103412.jpg" target="_blank">
            <img src="images/IMG_20200922_103412.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 10:34:12<br />
            <a
              href="https://maps.google.com/?q=47.719166921451688,-90.534009542316198"
              target="_blank"
              >ğŸ“ 47.71916, -90.53400</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_111922.jpg" target="_blank">
            <img src="images/IMG_20200922_111922.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 11:19:22<br />
            <a
              href="https://maps.google.com/?q=47.713817004114389,-90.540228579193354"
              target="_blank"
              >ğŸ“ 47.71381, -90.54022</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_112010.jpg" target="_blank">
            <img src="images/IMG_20200922_112010.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 11:20:10<br />
            <a
              href="https://maps.google.com/?q=47.713850112631917,-90.540256658568978"
              target="_blank"
              >ğŸ“ 47.71385, -90.54025</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_123007.jpg" target="_blank">
            <img src="images/IMG_20200922_123007.jpg" />
          </a>
          <figcaption>
            Lookout Mountain<br />
            Taken: 2020-09-22 12:30:07<br />
            <a
              href="https://maps.google.com/?q=47.713850112631917,-90.540256658568978"
              target="_blank"
              >ğŸ“ 47.71385, -90.54025</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_135301.jpg" target="_blank">
            <img src="images/IMG_20200922_135301.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 13:53:01<br />
            <a
              href="https://maps.google.com/?q=47.696032701060176,-90.618280023336411"
              target="_blank"
              >ğŸ“ 47.69603, -90.61828</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_143637.jpg" target="_blank">
            <img src="images/IMG_20200922_143637.jpg" />
          </a>
          <figcaption>
            Taken: 2020-09-22 14:36:37<br />
            <a
              href="https://maps.google.com/?q=47.691100537776947,-90.644574221223593"
              target="_blank"
              >ğŸ“ 47.69110, -90.64457</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_160035.jpg" target="_blank">
            <img src="images/IMG_20200922_160035.jpg" />
          </a>
          <figcaption>
            Lake Agnus<br />
            Taken: 2020-09-22 16:00:35<br />
            <a
              href="https://maps.google.com/?q=47.700316188856959,-90.682163871824741"
              target="_blank"
              >ğŸ“ 47.70031, -90.68216</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_162504.jpg" target="_blank">
            <img src="images/IMG_20200922_162504.jpg" />
          </a>
          <figcaption>
            Poplar River<br />
            Taken: 2020-09-22 16:25:04<br />
            <a
              href="https://maps.google.com/?q=47.693175561726093,-90.693567451089621"
              target="_blank"
              >ğŸ“ 47.69317, -90.69356</a
            >
          </figcaption>
        </figure>

        <figure>
          <a href="images/IMG_20200922_180839.jpg" target="_blank">
            <img src="images/IMG_20200922_180839.jpg" />
          </a>
          <figcaption>
            Poplar River from the West Poplar River Campsite<br />
            Taken: 2020-09-22 18:08:39<br />
            <a
              href="https://maps.google.com/?q=47.678810823708773,-90.70556815713644"
              target="_blank"
              >ğŸ“ 47.67881, -90.70556</a
            >
          </figcaption>
        </figure>
      </section>
    </main>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/togeojson@0.16.0/togeojson.js"></script>
    <script>
      window.addEventListener("load", () => {
        const map = L.map("trail-map").setView([47.38, -91.247], 7);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution: "&copy; OpenStreetMap contributors",
        }).addTo(map);
        const campsiteIcon = L.icon({
          iconUrl: "icons/campsite.png", // Adjust the path as needed
          iconSize: [24, 24],
          iconAnchor: [12, 12],
          popupAnchor: [0, -10],
        });

        fetch("2020SHTtrip.gpx")
          .then((res) => res.text())
          .then((gpxText) => {
            const parser = new DOMParser();
            const gpx = parser.parseFromString(gpxText, "application/xml");
            const geojson = toGeoJSON.gpx(gpx);

            // ğŸ¯ 1. Show only the track named "2020-09-26 06:38:52 Day"
            const tracks = geojson.features.filter(
              (f) =>
                f.geometry.type === "LineString" &&
                f.properties.name === "2020-09-22 Day"
            );

            tracks.forEach((feature) => {
              const coords = feature.geometry.coordinates.map((c) => [
                c[1],
                c[0],
              ]);
              L.polyline(coords, { color: "blue", weight: 4 }).addTo(map);
              map.fitBounds(L.polyline(coords).getBounds());
            });

            // ğŸ• 2. Add all waypoints with appropriate icons
            geojson.features
              .filter((f) => f.geometry.type === "Point")
              .forEach((feature) => {
                const lat = feature.geometry.coordinates[1];
                const lon = feature.geometry.coordinates[0];
                const name = feature.properties.name || "Unnamed";
                const sym = feature.properties.sym || "";

                const icon =
                  sym === "Campground"
                    ? campsiteIcon
                    : L.icon({
                        iconUrl:
                          "https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",
                        iconSize: [25, 41],
                        iconAnchor: [12, 41],
                        popupAnchor: [1, -34],
                      });

                L.marker([lat, lon], { icon })
                  .addTo(map)
                  .bindPopup(`${sym === "Campground" ? "ğŸ• " : "ğŸ“ "}${name}`);
              });
          })
          .catch((err) => console.error("GPX load error:", err));
      });
    </script>
  </body>
</html>